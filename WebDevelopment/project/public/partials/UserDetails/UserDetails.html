<div class="col-sm-8" ng-show="!user">
 <span class="instructions"> Sorry the user's profile is currently unavailable :-(</span>
</div>
<div ng-show="user">

    <div class="row">
        <div class=" col-sm-4">
        </div>
        <div class="col-sm-4">
            <h3> {{user.firstname}}'s profile</h3>
        </div>
        <div class="col-sm-4">
            <a href="" ng-click="followUser()" ng-hide="followsAlready"> 
            <span class="glyphicon glyphicon-thumbs-up topPadding"></span> &nbsp; Follow this user</a>
            <a href="" ng-click="unfollowUser()" ng-show="followsAlready"> 
            <span class="glyphicon glyphicon-thumbs-down topPadding"></span> &nbsp; Unfollow this user</a>
        </div>
    </div>
    
    <div class="col-sm-7">
    </div>
    </div>
    <div class="tablediv row">
        <div class="col-sm-2">
        </div>
        <div class="col-sm-8">
        <tabset justified="true">
    		<tab class="cursor" heading="Personal Information">
    			<table class="table table-striped table-hover table-bordered table-responsive">
                <tbody>
                    <tr>
                        <td width="35%"> <b>First Name </b></td> <td width="65%"> {{user.firstname}}</td>
                    </tr>
                    <tr>
                        <td > <b>Last Name </b></td> <td > {{user.firstname}}</td>
                    </tr>
                    <tr>
                        <td > <b>Email </b></td> <td > {{user.email}}</td>
                    </tr>
                    <tr>
                        <td > <b>Country </b></td> <td > {{user.country}}</td>
                    </tr>
                </tbody>
            </table>
    		</tab>
        	<tab class="cursor" heading="Favorites">
        	<div ng-show="favoriteProducts.length == 0">
        	<br/>
    		<br/>
        	<span class="instructions taberror"> Sorry this user doesn't have any products as his favorites :-(</span>
			</div>
			
			<table class="table table-striped table-hover table-bordered table-responsive" ng-show="favoriteProducts.length>0">
            
            <thead>
                <tr>
                    <th>
                        Product Image
                    </th>
                    <th>
                        Product description
                    </th>
                    <th>
                        Price details
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="product in favoriteProducts">
                    <td width="20%" class="prdtimg"><img class="centeredImg" ng-src="{{product.image}}" 
                    alt="Image currently unavailable"></td>
                    <td width="60%">
                        <a href="#/viewDetails/{{product.sku}}/{{userId}}"> <h4><b>{{product.name}}</b></h4> </a>
                        <p><b>Product Id: </b>{{product.sku}}</p>
                        <p><b>Short Description:</b> {{product.shortDescription}}</p>
                        <p ng-show="product.customerReviewAverage"><b>Customer rating :</b> {{product.customerReviewAverage}} out of 5</p>
                    </td>
                    <td width="30%" class="priceDetails">
                        <button ng-click="addToFavorites(product.sku)" class=" btn btn-success">
                            <span class="glyphicon glyphicon-shopping-star"></span> Add to my favorites
                        </button>
                        <div class="salePrice"> ${{product.salePrice}} </div>
                        <div ng-if="(product.regularPrice - product.salePrice) > 0"> ON SALE </div>
                        <div class="regularPrice"> (Reg. price: ${{product.regularPrice}}) </div>
                        <div ng-if="(product.regularPrice - product.salePrice) > 0">
                        	<div class="savings"> You save ${{product.regularPrice - product.salePrice}}!! </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    		</tab>
    		<tab class="cursor" heading="Reviews">
    		<div ng-show="reviewedProducts.length == 0" >
    		<br/>
    		<br/>
    		<span class="instructions taberror"> Sorry this user has not reviewed any products yet :-(</span>
			</div>
			
			<table class="table table-striped table-hover table-bordered table-responsive" ng-show="reviewedProducts.length >0">
            
            <tbody>
                <tr ng-repeat="product in reviewedProducts">
                    <td width="40%">
                    	<span class="reviewImg"><img class="centeredImg" ng-src="{{product.image}}" alt="Image currently unavailable"> </span>
                        <a href="#/viewDetails/{{product.sku}}"> <h4><b>{{product.name}}</b></h4> </a>
                        <p><b>Product Id: </b>{{product.sku}}</p>
                        <p><b>Short Description:</b> {{product.shortDescription}}</p>
                    </td>
                    <td width="30%">
                        <h4>{{product.userReview.title}}</h4>
                        <h6>{{product.userReview.comment}}</h6>
                        My rating : <span>{{product.userReview.rating}} out of 5
        				<div star-rating rating-value="product.userReview.rating" max=5 ></div>
                    </td>
                </tr>
            </tbody>
            
        	</table>
    		</tab>
    		
    	</tabset>
        </div>
        <div class="col-sm-2">
        </div>
    </div>
</div>