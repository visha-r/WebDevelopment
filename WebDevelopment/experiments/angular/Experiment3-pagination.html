<!DOCTYPE html>
<html>
<head>
    <title>Visha's Experiments</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Web Development CS-5610 Home Page">
    <meta name="author" content="Vishalakshy Rajaram Chettiar">
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/StyleSheet.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <script src="js/angular3.js"></script>
</head>
<body ng-app="ionicApp" ng-controller="MainCtrl">
    <div class="main-wrapper">
        <h1>AngularJS Experiment 4 - Pagination </h1>
        <div class="demo-wrapper">
            <h2>Pagination</h2>
            <div class="container">
                <div class="row">
                    <div class="col-sm-2">
                    </div>
                    <div class="col-sm-8">
                        <div class="search-wrapper">
                            <label for="title">Manufacturer Name : </label>
                            <form>
                                <input type="text" class="title search-box" name="focus" size="65" ng-model="title" placeholder="Enter any manufacturer name like Apple, Samsung, Nokia etc.. and wait for few seconds.." />
                                <button class="close-icon" type="reset"></button>
                            </form>
                        </div>
                    </div>
                    <div class="col-sm-2">
                    </div>
                </div>
                <div class="tablediv row">
                    <div class="col-sm-2">
                    </div>
                    <div class="col-sm-8">
                        <table class="table table-striped table-hover table-bordered table-responsive prdtTable">
                            <thead>
                                <tr>
                                    <th>
                                        Product Image
                                    </th>
                                    <th>
                                        Product description
                                    </th>
                                    <th>
                                        Product price
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="product in products | offset: currentPage*itemsPerPage | limitTo : itemsPerPage">
                                    <td width="20%" class="prdtimg"><img class="centeredImg" ng-src="{{product.image}}"></td>
                                    <td width="60%">
                                        <h4><b>{{product.name}}</b></h4>
                                        <p><b>Product Id: </b>{{product.sku}}</p>
                                        <p><b>Short Description:</b> {{product.shortDescription}}</p>
                                        <p><b>Long description : </b>{{product.longDescription}}</p>
                                    </td>
                                    <td width="40%">
                                        <p><b>Regular price : </b>${{product.regularPrice}}</p>
                                        <p><b>Sale Price : </b>${{product.salePrice}}</p>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot style="text-align:center">
                                <tr>
                                    <td colspan="3">
                                        <span class="pagination">
                                            <span ng-class="prevPageDisabled()">
                                                <a href ng-click="prevPage()">« Prev</a>
                                            </span>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <span ng-repeat="n in range()"
                                                  ng-class="{active: n == currentPage}" ng-click="setPage(n)">
                                                <a href="#">{{n+1}}</a>
                                            </span>
                                            <span ng-class="nextPageDisabled()">
                                                <a href ng-click="nextPage()">Next »</a>
                                            </span>
                                        </span>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="col-sm-2">
                    </div>
                </div>
            </div>
        </div>
        <h2>About the experiment</h2>
        <p id="text">
            This experiment uses pagination to render limited number of records in every page. We can specify the number
            of records that each page should list. Accordingly, the links to pagination will get updated. 'ng-repeat' directive 
            is used to render only the items for the current page. All the pagination logic should be handled in a custom filter 
            and controller implementation.
            <br />
            <br />
            <b>Code Snippet:</b>
            <br />
            <br />
            <table class="code">
                <tr>
                    <td width="100%">
                        &lt;tr ng-repeat=&quot;product in products | offset: currentPage*itemsPerPage | limitTo : itemsPerPage&quot;&gt;
                    </td>
                </tr>
            </table>
            <br />
            The controller manages the actual $scope.products array and handles the logic for enabling/disabling the pagination buttons.
            The offset filter uses the currentPage*itemsPerPage to calculate the offset for the array slice operation. This will generate 
            an array from the offset to the end of the array. Then we use the built-in limitTo filter to subset the array to the number of itemsPerPage.
            The methods prevPageDisabled and nextPageDisabled make sure that prev and next links are enabled only when needed.
            <br />
            <br />
            <b>Code Snippet:</b>
            <br />
            <br />
            <table class="code">
                <tr>
                    <td width="100%">
                        $scope.prevPageDisabled = function () { <br />
                        return $scope.currentPage === 0 ? &quot;disabled&quot; : &quot;&quot;; <br />
                        }; <br />

                        $scope.nextPageDisabled = function () { <br />
                        return $scope.currentPage === $scope.pageCount() ? &quot;disabled&quot; : &quot;&quot;; <br />
                        }; <br />
                    </td>
                </tr>
            </table>
        
        </p>
        <h2>Source Code</h2>
        <div><a href="../../fileview/Default.aspx?~/experiments/angular/Experiment3-pagination.html" target="_blank">HTML Source</a></div>
        <div><a href="../../fileview/Default.aspx?~/experiments/angular/js/angular3.js" target="_blank">AngularJS Source</a></div>
        <h2>References</h2>
        <div><a href="http://fdietz.github.io/recipes-with-angular-js/" target="_blank">AngularJS recipes</a></div>
    </div>
</body>
</html>